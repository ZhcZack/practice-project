<!DOCTYPE html>
<html lang="en">

<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1.0">
	<meta http-equiv="X-UA-Compatible" content="ie=edge">
	<title>用键盘控制div</title>
	<style>
		pre {
			border: 1px dotted green;
			background-color: lightgray;
			color: green;
			padding: 10px;
			word-wrap: break-word;
		}

		#div {
			width: 100px;
			height: 100px;
			background-color: red;
			position: absolute;
			top: 400px;
			left: 300px;
		}
	</style>
</head>

<body>
	<pre>
红色方块为键盘操作区域，您可以进行如下操作： 

上：↑ 下：↓ 左：← 右：→ 

Ctrl + 1 : 背景变为绿色 
Ctrl + 2 : 背景变为黄色
Ctrl + 3 : 背景变为蓝色
Ctrl + ↑ : 放大
Ctrl + ↓ : 缩小
	</pre>
	<div id="div"></div>
	<script>
		var get = document.querySelector.bind(document)
		var getAll = document.querySelectorAll.bind(document)
		var log = console.log.bind(console)

		function main() {
			var d = get('#div')
			dActions(d)
		}

		function dActions(d) {
			var info = {
				'up': false,
				'down': false,
				'left': false,
				'right': false,
			}
			window.addEventListener('keydown', function (e) {
				var key = e.key
				switch (key) {
					case (e.ctrlKey && 'ArrowUp'):
						zoomDiv(d, 'in')
						break
					case (e.ctrlKey && 'ArrowDown'):
						zoomDiv(d, 'out')
						break
					case 'ArrowUp':
						info.up = true
						break
					case 'ArrowLeft':
						info.left = true
						break
					case 'ArrowRight':
						info.right = true
						break
					case 'ArrowDown':
						info.down = true
						break
					case (e.ctrlKey && '1'):
						changeDivColor(d, 'green')
						break
					case (e.ctrlKey && '2'):
						changeDivColor(d, 'yellow')
						break
					case (e.ctrlKey && '3'):
						changeDivColor(d, 'blue')
						break
					default:
						break
				}
			})
			window.addEventListener('keyup', function (e) {
				var key = e.key
				switch (key) {
					case 'ArrowUp':
						info.up = false
						break
					case 'ArrowLeft':
						info.left = false
						break
					case 'ArrowRight':
						info.right = false
						break
					case 'ArrowDown':
						info.down = false
						break
				}
			})
			moveDiv(d, info)
		}

		function zoomDiv(d, method) {
			var w = d.offsetWidth
			var h = d.offsetHeight
			switch (method) {
				case 'in':
					d.style.width = w * 1.5 + 'px'
					d.style.height = h * 1.5 + 'px'
					break
				case 'out':
					d.style.width = w / 1.5 + 'px'
					d.style.height = h / 1.5 + 'px'
				default:
					break
			}
		}

		function changeDivColor(obj, color) {
			obj.style.backgroundColor = color
		}

		function moveDiv(obj, info) {
			var speed = 8
			var rect = obj.getBoundingClientRect()
			var left = rect.left
			var top = rect.top
			setInterval(function () {
				if (info.left) {
					obj.style.left = (left -= speed) + 'px'
				}
				if (info.right) {
					obj.style.left = (left += speed) + 'px'
				}
				if (info.up) {
					obj.style.top = (top -= speed) + 'px'
				}
				if (info.down) {
					obj.style.top = (top += speed) + 'px'
				}
				moveWithLimit(obj)
			}, 1000 / 60)

		}

		function moveWithLimit(obj) {
			if (obj.offsetLeft < 0) {
				obj.style.left = 0 + 'px'
			} else if (obj.offsetLeft + obj.offsetWidth >= window.innerWidth) {
				obj.style.left = window.innerWidth - obj.offsetWidth + 'px'
			}
			if (obj.offsetTop < 0) {
				obj.style.top = 0 + 'px'
			} else if (obj.offsetTop + obj.offsetHeight >= window.innerHeight) {
				obj.style.top = window.innerHeight - obj.offsetHeight + 'px'
			}
		}

		main()
	</script>
</body>

</html>