<!DOCTYPE html>
<html lang="en">

<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1.0">
	<meta http-equiv="X-UA-Compatible" content="ie=edge">
	<title>setTimeout应用</title>
	<style>
		.nav {
			width: 880px;
			height: 30px;
			padding: 5px 10px;
			line-height: 30px;
			position: relative;
			background: linear-gradient(to bottom, #769BBF, #225D98);
			text-align: center;
			border-radius: 10px;
		}

		.nav a {
			color: white;
			text-decoration: none;
		}

		.nav ul {
			list-style: none;
			padding: 0;
			margin: 0;
			font-size: 0;
		}

		.nav ul li {
			display: inline-block;
		}

		.nav>ul>li {
			width: 100px;
			text-align: center;
			font-size: 16px;
		}

		.nav>ul>li>a {
			display: inline-block;
			width: 100%;
		}

		.nav>ul>li>a:hover {
			background-color: rgba(255, 255, 255, 0.5);
			border-radius: 10px;
		}

		.subnav {
			display: none;
			position: absolute;
			top: 50px;
			/* left: 0; */
		}

		.subnav ul {
			border: 1px solid #769BBF;
			border-radius: 5px;
			height: 30px;
			line-height: 30px;
			padding: 0 10px;
			background: linear-gradient(to bottom, #fff, #769BBF);
		}

		.subnav ul li {
			width: 80px;
			font-size: 14px;
		}

		.subnav a {
			color: #235E99;
			text-decoration: none;
		}

		.subnav a:hover {
			text-decoration: underline;
		}
	</style>
</head>

<body>
	<nav class="nav">
		<ul>
			<li><a href="javascript:void(0)">站长之家</a>
				<nav class="subnav">

				</nav>
			</li>
			<li><a href="javascript:void(0)">行业资讯</a>
				<nav class="subnav">
					<ul>
						<li><a href="javascript:void(0)">业界动态</a></li>
						<li><a href="javascript:void(0)">收购融资</a></li>
						<li><a href="javascript:void(0)">门户动态</a></li>
						<li><a href="javascript:void(0)">搜索引擎</a></li>
						<li><a href="javascript:void(0)">网络游戏</a></li>
						<li><a href="javascript:void(0)">电子商务</a></li>
						<li><a href="javascript:void(0)">广告传媒</a></li>
						<li><a href="javascript:void(0)">厂商开发</a></li>
					</ul>
				</nav>
			</li>
			<li><a href="javascript:void(0)">站长在线</a>
				<nav class="subnav">
					<ul>
						<li><a href="javascript:void(0)">站长报道</a></li>
						<li><a href="javascript:void(0)">好站推荐</a></li>
						<li><a href="javascript:void(0)">站长聚会</a></li>
						<li><a href="javascript:void(0)">站长访谈</a></li>
						<li><a href="javascript:void(0)">站长茶馆</a></li>
						<li><a href="javascript:void(0)">网站排行</a></li>
					</ul>
				</nav>
			</li>
			<li><a href="javascript:void(0)">网站运营</a>
				<nav class="subnav">
					<ul>
						<li><a href="javascript:void(0)">建站经验</a></li>
						<li><a href="javascript:void(0)">策划盈利</a></li>
						<li><a href="javascript:void(0)">搜索优化</a></li>
						<li><a href="javascript:void(0)">网站推广</a></li>
						<li><a href="javascript:void(0)">免费资源</a></li>
					</ul>
				</nav>
			</li>
			<li><a href="javascript:void(0)">设计在线</a>
				<nav class="subnav">
					<ul>
						<li><a href="javascript:void(0)">酷站推荐</a></li>
						<li><a href="javascript:void(0)">网页设计</a></li>
						<li><a href="javascript:void(0)">WEB标准</a></li>
						<li><a href="javascript:void(0)">视频处理</a></li>
						<li><a href="javascript:void(0)">设计活动</a></li>
					</ul>
				</nav>
			</li>
			<li><a href="javascript:void(0)">网络编程</a>
				<nav class="subnav">
					<ul>
						<li><a href="javascript:void(0)">Asp编程</a></li>
						<li><a href="javascript:void(0)">Php编程</a></li>
						<li><a href="javascript:void(0)">.Net编程</a></li>
						<li><a href="javascript:void(0)">Xml编程</a></li>
						<li><a href="javascript:void(0)">Access</a></li>
						<li><a href="javascript:void(0)">Mssql</a></li>
						<li><a href="javascript:void(0)">Mysql</a></li>
					</ul>
				</nav>
			</li>
			<li><a href="javascript:void(0)">联盟资讯</a>
				<nav class="subnav">
					<ul>
						<li><a href="javascript:void(0)">联盟动态</a></li>
						<li><a href="javascript:void(0)">联盟介绍</a></li>
						<li><a href="javascript:void(0)">联盟点评</a></li>
						<li><a href="javascript:void(0)">网赚技巧</a></li>
					</ul>
				</nav>
			</li>
			<li><a href="javascript:void(0)">服务器</a>
				<nav class="subnav">
					<ul>
						<li><a href="javascript:void(0)">Web服务器</a></li>
						<li><a href="javascript:void(0)">Ftp服务器</a></li>
						<li><a href="javascript:void(0)">Mail服务器</a></li>
						<li><a href="javascript:void(0)">Dns服务器</a></li>
						<li><a href="javascript:void(0)">Win服务器</a></li>
						<li><a href="javascript:void(0)">Linux服务器</a></li>
						<li><a href="javascript:void(0)">安全防护</a></li>
						<li><a href="javascript:void(0)">虚拟主机</a></li>
					</ul>
				</nav>
			</li>
		</ul>
	</nav>
	<script>
		var get = document.querySelector.bind(document)
		var getAll = document.querySelectorAll.bind(document)
		var log = console.log.bind(console)

		var subnav = getAll('.subnav')
		var nav = get('.nav')
		var lis = getAll('.nav > ul > li')
		var timer = null
		var s = null

		lis.forEach(function (li) {
			li.addEventListener('mouseover', function (e) {
				// log('in')
				subnav.forEach(function (sub) { sub.style.display = 'none' })
				s = li.querySelector('.subnav')
				s.style.display = 'block'
				// log('nav width: ' + nav.offsetWidth + 'offsetLeft: ' + this.offsetLeft + 'offsetWidth: ' + s.offsetWidth)
				if (nav.offsetWidth <= this.offsetLeft + s.offsetWidth) {
					s.style.right = 0
				} else {
					s.style.left = this.offsetLeft + 'px'
				}
				clearTimeout(timer)
			})
			li.addEventListener('mouseout', function (e) {
				log('out')
				s = li.querySelector('.subnav')
				// log('out, s: ' + s)
				timer = setTimeout(function () {
					s.style.display = 'none'
				}, 300)
			})
		})
	</script>
</body>

</html>